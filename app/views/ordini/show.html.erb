<%- model_class = Ordine -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:data) %>:</strong></dt>
  <dd><%= @ordine.created_at %></dd>

  <dt><strong><%= model_class.human_attribute_name(:cliente_id) %>:</strong></dt>
  <dd><%= @ordine.cliente_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:impresa_id) %>:</strong></dt>
  <dd><%= @ordine.impresa_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:stato_ordine) %>:</strong></dt>
  <dd><%= @ordine.getStato %></dd>
  <!-- Stampa la lista dei prodotti -->
  <div class="page-header">
    <h3>Lista dei prodotti</h3>
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th><%= model_class.human_attribute_name(:prodotto_id) %></th>
        <th><%= model_class.human_attribute_name(:nome) %></th>
        <th><%= model_class.human_attribute_name(:impresa) %></th>
        <th><%= model_class.human_attribute_name(:qta) %></th>
      </tr>
    </thead>
    <tbody>
      <% @ordine.prodotti.uniq.each do |prodotto| %>
      <tr>
        <td><%= prodotto.id %></td>
        <td><%= prodotto.nome %></td>
        <td><%= prodotto.impresa.nome %></td>
        <td><%= @ordine.occorrenzeProdotto(prodotto.id)%></td>
      </tr>
      <% end %>
    </tbody>
  </table>
  <!-- Totale e Spedizione -->
  <dt><strong><%= model_class.human_attribute_name(:spedizione) %>:</strong></dt>
  <dd><%= @ordine.spedizione %></dd>
  <dt><strong><%= model_class.human_attribute_name(:totale) %>:</strong></dt>
  <dd><%= @ordine.totale %></dd>
</dl>

<!-- Pagamento disponibile solo se si Ã¨ in conferma richiesta -->
<% if @ordine.getStato == StatoOrdine.CONFERMA %>
<%= link_to "Pocedi al pagamento con paypal", paypal_url_ordine_path(id: @ordine.id), method: :post %>
<%end%>

<%= link_to t('.back', :default => t("helpers.links.back")),
              ordini_path, :class => 'btn btn-default' ,method: :get %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_ordine_path(@ordine), :class => 'btn btn-default',method: :get %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              ordine_path(@ordine),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
